SELECT COUNT(*) FROM `spree_products` LEFT OUTER JOIN `spree_variants` ON `spree_variants`.`is_master` = TRUE AND `spree_variants`.`product_id` = `spree_products`.`id` LEFT OUTER JOIN `spree_prices` ON `spree_prices`.`currency` = 'USD' AND `spree_prices`.`country_iso` IS NULL AND `spree_prices`.`variant_id` = `spree_variants`.`id` WHERE `spree_products`.`deleted_at` IS NULL AND EXISTS (SELECT `spree_variants`.* FROM `spree_variants` WHERE `spree_variants`.`deleted_at` IS NULL AND `spree_variants`.`sku` LIKE '%A%' AND `spree_variants`.`product_id` = `spree_products`.`id`)