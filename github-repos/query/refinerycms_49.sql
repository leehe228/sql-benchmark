SELECT COUNT(*) FROM `refinery_crud_dummies` LEFT OUTER JOIN `refinery_crud_dummies` `parent` ON `parent`.`id` = `refinery_crud_dummies`.`parent_id` WHERE (((`refinery_crud_dummies`.`lft` IS NULL OR `refinery_crud_dummies`.`rgt` IS NULL) OR `refinery_crud_dummies`.`lft` >= `refinery_crud_dummies`.`rgt`) OR `refinery_crud_dummies`.`parent_id` IS NOT NULL AND (`refinery_crud_dummies`.`lft` <= `parent`.`lft` OR `refinery_crud_dummies`.`rgt` >= `parent`.`rgt`))