SELECT "topics".* FROM "topics" LEFT OUTER JOIN topic_users AS tu ON (topics.id = tu.topic_id AND tu.user_id = 5352) WHERE ("topics"."deleted_at" IS NOT NULL) AND (topics.id IN (SELECT topic_id FROM topic_allowed_users WHERE user_id = 5352)) AND "topics"."archetype" = 'private_message' AND "topics"."visible" = TRUE AND (tu.last_read_post_number IS NULL OR tu.last_read_post_number < topics.highest_post_number) ORDER BY topics.bumped_at DESC LIMIT 30