SELECT "posts".* FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" AND ("topics"."deleted_at" IS NOT NULL) WHERE ("posts"."deleted_at" IS NOT NULL) AND (posts.post_type IN (1,2,3)) AND ("topics"."deleted_at" IS NOT NULL) AND ((topics.archetype <> 'private_message') AND (topics.category_id IS NULL OR topics.category_id IN (SELECT id FROM categories WHERE NOT read_restricted)) OR "topics"."archetype" = 'private_message' AND (topics.id IN (SELECT topic_id FROM topic_allowed_users WHERE user_id = 1258 UNION ALL SELECT tg.topic_id FROM topic_allowed_groups tg JOIN group_users gu ON gu.user_id = 1258 AND gu.group_id = tg.group_id ))) AND "posts"."id" IS NULL