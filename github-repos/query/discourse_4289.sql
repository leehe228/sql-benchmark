SELECT DISTINCT topics.bumped_at AS alias_0, "topics"."id" FROM "topics" INNER JOIN "topic_tags" ON "topic_tags"."topic_id" = "topics"."id" INNER JOIN "tags" ON "tags"."id" = "topic_tags"."tag_id" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN topic_users AS tu ON (topics.id = tu.topic_id AND tu.user_id = 7461) LEFT JOIN category_users ON category_users.category_id = topics.category_id AND category_users.user_id = 7461 WHERE (categories.id in (3787) AND ( categories.topic_id <> topics.id OR categories.id = 3787 ) ) AND (tags.id in (1929)) AND (topics.archetype <> 'private_message') AND (topics.deleted_at IS NOT NULL) AND (topics.category_id IS NULL or topics.category_id IN (1,3788,3787)) AND (COALESCE(tu.notification_level,1) > 0) AND (topics.category_id = 3787 OR COALESCE(category_users.notification_level, 1) <> 0 OR tu.notification_level > 1) AND (topics.category_id = 3787 AND pinned_at IS NOT NULL AND (topics.pinned_at > tu.cleared_pinned_at OR tu.cleared_pinned_at IS NOT NULL)) ORDER BY topics.bumped_at DESC LIMIT 30