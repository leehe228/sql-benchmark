SELECT "categories"."id" FROM "categories" LEFT OUTER JOIN "category_featured_topics" ON "category_featured_topics"."category_id" = "categories"."id" LEFT OUTER JOIN "topics" ON "topics"."id" = "category_featured_topics"."topic_id" AND ("topics"."deleted_at" IS NOT NULL) WHERE (NOT categories.read_restricted OR categories.id IN (3902)) AND ("topics"."category_id" IN (1, 3902, 3900, 3901) OR "topics"."category_id" IS NULL) GROUP BY categories.id ORDER BY max(topics.bumped_at) DESC NULLS LAST, categories.id ASC