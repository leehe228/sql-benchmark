SELECT DISTINCT `users`.* FROM `users` INNER JOIN `members` ON `members`.`user_id` = `users`.`id` INNER JOIN `member_roles` ON `member_roles`.`member_id` = `members`.`id` INNER JOIN `roles` ON `roles`.`id` = `member_roles`.`role_id` WHERE `users`.`status` = 1 AND `users`.`type` = 'User' AND `members`.`project_id` = 1 AND `roles`.`assignable` = TRUE ORDER BY users.type DESC, users.firstname, users.lastname, users.id