SELECT COUNT(*) FROM "posts" WHERE ("posts"."deleted_at" IS NOT NULL) AND (posts.post_type IN (1,2,3)) AND (post_number > COALESCE(( SELECT last_read_post_number FROM topic_users tu WHERE tu.user_id = 1087 AND tu.topic_id = 16038 ),0)) AND (reply_to_user_id = 1087 OR exists( SELECT 1 from topic_users tu WHERE tu.user_id = 1087 AND tu.topic_id = 16038 AND notification_level = 3 )) AND "posts"."topic_id" = 16038