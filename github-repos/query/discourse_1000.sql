SELECT distinct "posts".* FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" AND ("topics"."deleted_at" IS NOT NULL) INNER JOIN "categories" ON "categories"."id" = "topics"."category_id" INNER JOIN "users" ON "users"."id" = "posts"."user_id" INNER JOIN "group_users" ON "group_users"."user_id" = "users"."id" INNER JOIN "groups" ON "groups"."id" = "group_users"."group_id" WHERE ("posts"."deleted_at" IS NOT NULL) AND "groups"."id" = 2561 AND (topics.archetype <> 'private_message') AND (topics.visible) AND "posts"."post_type" = 1 AND (topics.category_id IS NULL or topics.category_id IN (1)) ORDER BY posts.created_at desc LIMIT 20