SELECT `users`.* FROM `users` WHERE `users`.`status` = 1 AND `users`.`status` = 1 AND (users.id = 2 OR users.id IN (SELECT user_id FROM members WHERE project_id IN (1,2,3,4,5,6))) AND `users`.`type` IN ('User', 'Group') AND (LOWER(users.login) LIKE LOWER('%autocomp%') OR users.id IN (SELECT user_id FROM email_addresses WHERE LOWER(address) LIKE LOWER('%autocomp%')) OR ((LOWER(users.firstname) LIKE LOWER('%autocomp%') OR LOWER(users.lastname) LIKE LOWER('%autocomp%')))) ORDER BY users.type DESC, users.firstname, users.lastname, users.id LIMIT 100