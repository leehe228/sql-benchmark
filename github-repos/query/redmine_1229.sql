SELECT `issues`.* FROM `issues` INNER JOIN `issue_statuses` ON `issue_statuses`.`id` = `issues`.`status_id` INNER JOIN `trackers` ON `trackers`.`id` = `issues`.`tracker_id` INNER JOIN `projects` ON `projects`.`id` = `issues`.`project_id` INNER JOIN `enumerations` ON `enumerations`.`id` = `issues`.`priority_id` AND `enumerations`.`type` IN ('IssuePriority') WHERE ( EXISTS (SELECT 1 FROM journals sj WHERE sj.journalized_type='Issue' AND sj.journalized_id=issues.id AND (sj.user_id IN (1002)) AND sj.id IN (SELECT MAX(journals.id) FROM journals WHERE journals.journalized_type='Issue' AND journals.journalized_id=issues.id AND ((journals.private_notes = FALSE OR journals.user_id = 6 OR (1=0))))))