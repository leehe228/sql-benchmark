SELECT "users"."id" FROM "users" LEFT JOIN user_options ON user_options.user_id = users.id LEFT JOIN muted_users ON muted_users.user_id = users.id AND muted_users.muted_user_id = 1342 LEFT JOIN ignored_users ON ignored_users.user_id = users.id AND ignored_users.ignored_user_id = 1342 WHERE (user_options.user_id IS NOT NULL) AND ( (user_options.user_id IN (1343) AND NOT user_options.allow_private_messages) OR muted_users.user_id IN (1343) OR ignored_users.user_id IN (1343) )