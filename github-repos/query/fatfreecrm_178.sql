SELECT COUNT(*) FROM (SELECT DISTINCT *, amount*probability FROM `opportunities` WHERE ((`opportunities`.`assigned_to` = 1503) OR ((`opportunities`.`user_id` = 1503) OR (`opportunities`.`access` = 'Public'))) AND (stage IN ('prospecting')) ORDER BY opportunities.created_at DESC) subquery_for_count