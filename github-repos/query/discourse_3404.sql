SELECT MAX(user_badges.id) AS id, MAX(user_badges.badge_id) AS badge_id, MAX(user_badges.user_id) AS user_id, MAX(user_badges.granted_at) AS granted_at, MAX(user_badges.granted_by_id) AS granted_by_id, MAX(user_badges.post_id) AS post_id, MAX(user_badges.notification_id) AS notification_id, MAX(user_badges.seq) AS seq, MAX(user_badges.featured_rank) AS featured_rank, COUNT(*) AS "count" FROM "user_badges" WHERE (user_badges.badge_id IN (SELECT id FROM badges WHERE enabled)) AND (featured_rank <= 3) AND "user_badges"."user_id" IN (-1, 5749) GROUP BY "user_badges"."badge_id", "user_badges"."user_id" ORDER BY MAX(featured_rank) ASC