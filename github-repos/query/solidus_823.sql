SELECT `spree_variants`.`id` FROM `spree_variants` LEFT OUTER JOIN `spree_option_values_variants` ON `spree_option_values_variants`.`variant_id` = `spree_variants`.`id` LEFT OUTER JOIN `spree_option_values` ON `spree_option_values`.`id` = `spree_option_values_variants`.`option_value_id` LEFT OUTER JOIN `spree_products` ON `spree_products`.`id` = `spree_variants`.`product_id` WHERE `spree_variants`.`deleted_at` IS NULL AND ((((`spree_variants`.`sku` LIKE '%123%' OR `spree_products`.`name` LIKE '%123%') OR `spree_products`.`slug` LIKE '%123%') OR `spree_option_values`.`presentation` LIKE '%123%') OR `spree_option_values`.`name` LIKE '%123%')