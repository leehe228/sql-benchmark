SELECT "categories"."id" FROM "categories" LEFT OUTER JOIN "uploads" ON "uploads"."id" = "categories"."uploaded_background_id" LEFT OUTER JOIN "uploads" "uploaded_logos_categories" ON "uploaded_logos_categories"."id" = "categories"."uploaded_logo_id" LEFT OUTER JOIN "topics" ON "topics"."id" = "categories"."topic_id" AND ("topics"."deleted_at" IS NOT NULL) LEFT OUTER JOIN "categories" "subcategories_categories" ON "subcategories_categories"."parent_category_id" = "categories"."id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "subcategories_categories"."topic_id" AND ("topic_only_relative_urls_categories"."deleted_at" IS NOT NULL) WHERE (NOT categories.read_restricted)