SELECT `spree_variants`.`id` FROM `spree_variants` INNER JOIN `spree_stock_items` ON `spree_stock_items`.`deleted_at` IS NULL AND `spree_stock_items`.`variant_id` = `spree_variants`.`id` LEFT OUTER JOIN `spree_option_values_variants` ON `spree_option_values_variants`.`variant_id` = `spree_variants`.`id` LEFT OUTER JOIN `spree_option_values` ON `spree_option_values`.`id` = `spree_option_values_variants`.`option_value_id` LEFT OUTER JOIN `spree_products` ON `spree_products`.`id` = `spree_variants`.`product_id` WHERE `spree_variants`.`deleted_at` IS NULL AND (`spree_stock_items`.`count_on_hand` > 0 OR `spree_variants`.`track_inventory` = FALSE) AND ((((`spree_variants`.`sku` LIKE '%abc-123%' OR `spree_products`.`name` LIKE '%abc-123%') OR `spree_products`.`slug` LIKE '%abc-123%') OR `spree_option_values`.`presentation` LIKE '%abc-123%') OR `spree_option_values`.`name` LIKE '%abc-123%')