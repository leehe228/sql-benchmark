SELECT COUNT(*) FROM `spree_prices` INNER JOIN `spree_variants` ON `spree_prices`.`variant_id` = `spree_variants`.`id` INNER JOIN `spree_variants` `variants_spree_prices` ON `variants_spree_prices`.`id` = `spree_prices`.`variant_id` WHERE `spree_prices`.`deleted_at` IS NULL AND `spree_variants`.`deleted_at` IS NULL AND `spree_variants`.`product_id` = 31 AND `spree_variants`.`is_master` = FALSE