SELECT `queries`.* FROM `queries` LEFT OUTER JOIN projects ON queries.project_id = projects.id WHERE `queries`.`type` IN ('TimeEntryQuery') AND (queries.project_id IS NULL OR (projects.status <> 9 AND EXISTS (SELECT 1 AS one FROM enabled_modules em WHERE em.project_id = projects.id AND em.name='time_tracking'))) AND (queries.visibility <> 0 OR queries.user_id = 1) AND (`queries`.`project_id` = 1 OR `queries`.`project_id` IS NULL) ORDER BY `queries`.`name` ASC, `queries`.`id` ASC