SELECT "topics".* FROM "topics" LEFT OUTER JOIN topic_users AS tu ON (topics.id = tu.topic_id AND tu.user_id = 7613) JOIN topic_tags tt ON tt.topic_id = topics.id JOIN tags t ON t.id = tt.tag_id AND t.name = 'tag147' WHERE ("topics"."deleted_at" IS NOT NULL) AND (topics.id IN ( SELECT topic_id FROM topic_allowed_users WHERE user_id = 7613 UNION ALL SELECT topic_id FROM topic_allowed_groups WHERE group_id IN ( SELECT group_id FROM group_users WHERE user_id = 7613 ) )) AND "topics"."archetype" = 'private_message' AND "topics"."visible" = TRUE ORDER BY topics.bumped_at DESC LIMIT 30