SELECT note_diff_files.id FROM note_diff_files INNER JOIN notes ON notes.id = note_diff_files.diff_note_id AND notes.type IN ('DiffNote') LEFT JOIN projects ON projects.id = notes.project_id WHERE note_diff_files.diff_note_id IN (SELECT id FROM ((SELECT notes.* FROM notes WHERE notes.noteable_id = 18527120 AND notes.noteable_type = 'MergeRequest') UNION ALL (SELECT notes.* FROM notes WHERE notes.project_id IN (7764, 7764) AND notes.noteable_type = 'Commit' AND notes.commit_id IN (2044708959))) AS notes)